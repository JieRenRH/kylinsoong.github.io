---
layout: blog
title:  "Understanding Teiid DQPCore"
date:   2015-05-25 17:00:00
categories: teiid
permalink: /teiid-dqp
author: Kylin Soong
duoshuoid: ksoong2015052501
excerpt: What is a Request, How Teiid DQPCore execute Reuqest.
---

* Table of contents
{:toc}

## DQP Process Request

Once the client SQL query be passed to Teiid Engine(DQPCore), it first be formed as a `org.teiid.dqp.internal.process.Request` Object, which is the Server side representation of the RequestMessage, the UML diagram of Request:

![Request UML]({{ site.baseurl }}/assets/blog/teiid-dqp-process-request.png)

* `processRequest()` is the key operation method, which invoked by RequestWorkItem.
* `TempTableStore` - TempTableStores are transanctional, but do not act as full resource manager. This means we are effectively 1PC and don't allow any heuristic exceptions on commit. Table state snapshoting and a `javax.transaction.Synchronization` are used to perform the appropriate commit/rollback actions.

## Process of generate a ProcessorPlan

![generate ProcessorPlan]({{ site.baseurl }}/assets/blog/teiid-seq-generatePlan.png)

## RequestWorkItem run

RequestWorkItem class UML diagram can be find from [http://ksoong.org/teiid-uml-diagram/](http://ksoong.org/teiid-uml-diagram/), RequestWorkItem implements `Runnable` interface, the flowchart of RequestWorkItem as below:

![RequestWorkItem run]({{ site.baseurl }}/assets/blog/teiid-requestWorkItem-run.png)
